# MVP 开发任务清单（含 UI 优化规范）

说明：本文件将 architecture.md 中的架构要求与 UI 规范拆解成一系列非常小、单一、可独立测试的任务（每次只做一项）。所有 UI 使用 Element Plus 组件（`el-card` / `el-form` / `el-button` 等）。

优先级说明：High / Medium / Low。建议工程型 AI 按顺序逐项执行，完成一项后停下等待人工验收。

----------------------------------------------------------------------

**全局 UI 优化指标（必须在相关任务中实现）**
- 统一主色：偏中性色（灰-石墨）+ 少量强调色（Brand Accent，例如：#4F46E5 或自定义）
- 亮暗模式：两套配色仅调整亮度与对比度，不改变色调倾向；暗色基底为深灰（#0F1724 ~ #111318），亮色基底为柔和浅灰（#F5F7FA ~ #F3F4F6），避免纯黑/纯白
- 尺寸与间距：统一边距（8/16/24），控件高度统一（输入/按钮高度 40px / 32px 小尺寸）
- 交互：hover / active / focus 使用轻量过渡（150ms ease），避免大规模动画
- 层级：主要内容（卡片、主列）优先突出，次要信息（侧边栏、工具条）视觉弱化（低对比度文本）
- 无障碍：文本对比度 >= 4.5:1（正文）

每个任务包含：任务标题、开始条件、验收标准、优先级与估时（可选）。

----------------------------------------------------------------------

## 任务序列（按实际开发顺序）

### 0. 准备与环境（基础，先做）

任务 0.1 — 校验项目依赖与开发环境
- 开始条件：仓库已克隆，本地能运行 `npm install`。
- 验收标准：能在本地运行 `npm run dev` 并打开应用首页（如有错误，记录并停止）。
- 优先级：High

任务 0.2 — 安装并集成 Element Plus 与 Pinia（若尚未安装）
- 开始条件：`package.json` 可编辑。
- 验收标准：`main.js` 中正确引入 Element Plus、Pinia；页面可渲染 `el-button` 示例组件。
- 优先级：High

任务 0.3 — 新增全局主题 CSS 变量文件（`src/assets/theme.css`）并提交样例变量
- 开始条件：项目存在 `src/assets/` 目录。
- 验收标准：新增 `theme.css` 包含亮/暗主题变量（根级 CSS 变量）；在 `App.vue` 能通过 class 切换主题并使示例组件样式变化。
- 优先级：High

说明（theme.css 应包含）：
- 基础变量（--bg-base, --bg-surface, --text-primary, --text-secondary, --accent, --muted）
- 亮暗两套变量，仅在亮度/对比上差异，确保同一--accent

### 1. 全局布局与基础组件（影响所有页面）

任务 1.1 — 创建统一应用布局组件 `src/AppLayout.vue`
- 开始条件：项目能编译运行。
- 验收标准：包含顶部导航（`el-header`）、侧边栏 `el-aside`、主内容区 `el-main`，并能在路由中作为根布局使用；布局使用 Element Plus 容器并响应式。
- 优先级：High

任务 1.2 — 实现主题切换器 `ThemeSwitcher.vue` 并挂载到导航栏
- 开始条件：已创建 `theme.css`，`AppLayout.vue` 可编辑。
- 验收标准：点击切换器在亮/暗主题间切换，且所有根变量生效；切换有 150ms 过渡。
- 优先级：High

任务 1.3 — 创建全局 UI 基础样式（`src/style.css`）并确保 Element Plus 主题映射
- 开始条件：Element Plus 已安装。
- 验收标准：按钮、输入框、卡片等使用统一圆角/间距/阴影；样式在亮暗模式下保持一致尺寸与交互反馈。
- 优先级：High

任务 1.4 — 新建 `src/components/UICard.vue`（基于 `el-card` 的视觉统一卡片）
- 开始条件：`AppLayout.vue` 已存在。
- 验收标准：`UICard` 接受 `title`、`sub`、`size` props，在多个页面可以复用，样式在两种主题下一致。
- 优先级：High

任务 1.5 — 新建 `src/components/StandardForm.vue`（表单容器，基于 `el-form`）
- 开始条件：Element Plus 可用。
- 验收标准：封装统一表单间距、label 宽度、按钮组区域；可以通过 slot 注入表单项并在页面上复用。
- 优先级：High

### 2. 首页（`Home.vue`）UI 优化

任务 2.1 — 使用 `UICard` 重构首页主要面板（仪表板卡片）
- 开始条件：`UICard.vue` 已实现。
- 验收标准：首页主列使用 2 列布局（主内容 70% + 侧边 30%），主要信息卡片视觉最突出（更高对比、微阴影），次要卡片低对比显示。
- 优先级：Medium

任务 2.2 — 添加快速入口卡片（AI、Tools、Notes）并实现键盘可访问性
- 开始条件：任务 2.1 完成。
- 验收标准：3 个入口卡片使用 `el-card`，卡片可通过 Tab 键聚焦并触发回车导航。
- 优先级：Medium

### 3. AI 对话助手页面（`AIAssistant.vue`）UI 优化

任务 3.1 — 重构聊天窗口为 `ChatWindow` 组件，使用 `el-card` 包裹消息列表与输入区
- 开始条件：`UICard.vue` 可用。
- 验收标准：消息列表为滚动容器，输入框使用 `el-input`（多行），发送按钮使用 `el-button`；消息气泡区主内容高亮，时间/元数据次要弱化。
- 优先级：High

任务 3.2 — 将每条消息渲染为 `ChatMessage.vue`（区分 user/assistant），保持层级与可读性
- 开始条件：任务 3.1 完成。
- 验收标准：用户消息与 AI 消息颜色对比明显但在整体主色调内；暗色模式下使用更柔和的气泡背景（深灰/蓝灰）。
- 优先级：High

任务 3.3 — 实现轻量过渡（消息进入/发送状态）并确保性能（requestAnimationFrame 限制频率）
- 开始条件：ChatWindow 可渲染消息列表。
- 验收标准：消息添加时有 120-150ms 的入场过渡；高消息频率下不卡顿。
- 优先级：Medium

任务 3.4 — 在聊天页提供“保存对话”卡片按钮（可选，视觉占位）
- 开始条件：ChatWindow 重构完成。
- 验收标准：`el-button` 样式与主色调一致，按钮位于卡片头部右侧，次要操作使用 outline 风格。
- 优先级：Low

### 4. 文本工具页（`Tools.vue`）与通用小工具（JSON、正则）

任务 4.1 — 创建 `JsonFormatter.vue`（UI 基于 `el-card` + `el-input`）
- 开始条件：StandardForm 可复用。
- 验收标准：支持粘贴/格式化/压缩/错误定位；错误提示使用 `el-alert` 展示，且在暗/亮模式下可读。
- 优先级：High

任务 4.2 — 创建 `RegexTester.vue`（UI: 左侧规则输入，右侧测试文本）
- 开始条件：任务 4.1 完成。
- 验收标准：实时高亮匹配、显示分组列表；界面使用 `el-split` 或 CSS flex 布局，保持一致间距。
- 优先级：High

任务 4.3 — 将工具页的每个工具用 `UICard` 包裹并支持折叠（`el-collapse`）
- 开始条件：JsonFormatter 与 RegexTester 可用。
- 验收标准：工具列表条理清晰，展开/收起有轻量动画，主工具在展开时视觉优先。
- 优先级：Medium

### 5. Markdown 笔记页面（`Note.vue`）

任务 5.1 — 使用 `el-row` / `el-col` 布局编辑区与预览区（双列可调）
- 开始条件：全局样式与 UICard 可用。
- 验收标准：编辑区（左）与预览区（右）分别占比可拖拽或通过预设按钮切换（70/30, 50/50）；字体、代码块样式在暗/亮模式下适配。
- 优先级：High

任务 5.2 — 实现笔记自动保存到 localStorage（并由 notes store 管理）
- 开始条件：notes store 存在或可创建。
- 验收标准：编辑时 2s 间隔自动保存；刷新页面后能恢复编辑状态；UI 在保存时显示短暂提示（`el-notification`）。
- 优先级：High

### 6. PDF 页面与 OCR（`PDF.vue`）

任务 6.1 — 创建 PDF 上传与预览 UI（`el-upload` + `el-card`）
- 开始条件：可访问 PDF 测试文件。
- 验收标准：文件上传后能在页面显示缩略预览（或文件名），上传控制在UI上清晰，上传失败显示 `el-alert`。
- 优先级：Medium

任务 6.2 — 集成 OCR UI（识别按钮、结果区域）并显示识别进度
- 开始条件：OCR 接口可用（或 mock）。
- 验收标准：用户触发识别后显示进度条（`el-progress`），结果用 `UICard` 展示，错误时允许重试。
- 优先级：Medium

### 7. Supabase 与认证（保留登录/注册页面不改）

任务 7.1 — 检查并确保 Supabase 客户端为单例（`src/lib/supabaseClient.js`）
- 开始条件：项目中存在多处 createClient 调用或 `src/api/supabase.js`。
- 验收标准：新增或确认 `src/lib/supabaseClient.js` 仅调用一次 `createClient()`；其他模块从该单例导入；控制台不再出现 Multiple GoTrueClient 警告。
- 优先级：High

任务 7.2 — 将 user store 的 `checkAuth()` 在 App 启动时调用并处理 session 恢复
- 开始条件：user store 可修改。
- 验收标准：刷新页面后若有 session，自动恢复用户信息并更新路由守卫；无 session 时不自动登录。
- 优先级：High

### 8. 无障碍、性能与收尾

任务 8.1 — 为主页面添加键盘导航与焦点样式（a11y）
- 开始条件：主要页面 UI 已实现。
- 验收标准：使用 Tab 可遍历主要交互元素；焦点样式清晰且不破坏整体视觉。
- 优先级：Medium

任务 8.2 — 检查并修正颜色对比，确保正文对比度 >= 4.5:1
- 开始条件：主题变量已完成。
- 验收标准：使用对比工具检查关键文本颜色对比并修正变量；记录修改值。
- 优先级：Medium

任务 8.3 — 性能回归测试（主要页面首屏渲染时间与交互流畅度）
- 开始条件：主要页面完成。
- 验收标准：首屏加载时间 < 1s（本地 dev 环境），交互无卡顿；记录测试结果。
- 优先级：Low

----------------------------------------------------------------------

## 验收与执行流程建议
- 每次只做一个任务，完成后提交 PR 或在本地运行并截图/录屏给我验收。
- 若任务涉及外部配置（Supabase 项目、API Key），请在任务开始前明确告诉我需要哪些环境变量或控制台操作。
- 对每项任务估时建议：小任务 0.5–2h，中等任务 2–6h，复杂任务拆分。

如果您同意，我将从 `任务 0.1`（校验依赖与本地运行）开始，执行后暂停等待您验收。


----------------------------------------------------------------------
