import{_ as A,r as g,x as C,a as N,o as _,e,z,l as $,b as m,w as h,k as S,j as J,t as i,G as L,E as O,q as D,F as G,i as U}from"./index-B2QBWZZT.js";const q={class:"json-formatter"},K={class:"toolbar"},W={class:"toolbar-left"},Z={class:"toolbar-right"},H={class:"stat-text"},Q={class:"editor-layout"},X={class:"editor-section"},Y={class:"editor-section"},ee={class:"section-header"},te={class:"section-hint"},se={key:2,class:"stats-panel"},ae={class:"stats-grid"},le={class:"stat-item"},ne={class:"stat-item"},oe={class:"stat-value"},ie={class:"stat-item"},re={class:"stat-value"},de={class:"stat-item"},ue={class:"stat-value"},ce={class:"stat-item"},ve={class:"stat-value"},pe={class:"stat-item"},me={class:"stat-value"},fe={__name:"JsonFormatter",setup(F){const o=g(""),n=g(""),l=g(null),a=g(null),y=g(!1),u=g("格式化"),b=C(()=>o.value.split(`
`).length),V=C(()=>{const s=new Blob([o.value]).size;return s===0?"0 B":s<1024?s+" B":s<1024*1024?(s/1024).toFixed(2)+" KB":(s/(1024*1024)).toFixed(2)+" MB"});function E(s){try{let r=function(f,k=0){p=Math.max(p,k),Array.isArray(f)?(c+=f.length,f.forEach(w=>r(w,k+1))):f!==null&&typeof f=="object"&&(d+=Object.keys(f).length,Object.values(f).forEach(w=>r(w,k+1)))};const t=JSON.parse(s);let d=0,p=0,c=0;r(t);const x=new Blob([JSON.stringify(t,null,2)]).size,T=new Blob([JSON.stringify(t)]).size,B=Math.round((1-T/x)*100);return{isValid:!0,type:Array.isArray(t)?"数组":typeof t,keyCount:d,depth:p,arrayCount:c,compressionRate:B>0?B:0}}catch{return{isValid:!1,type:"无效",keyCount:0,depth:0,arrayCount:0,compressionRate:0}}}const v=C(()=>n.value?E(n.value):null);function I(){if(!o.value.trim()){l.value={title:"输入为空",message:"请先输入 JSON 数据"};return}y.value=!0;try{const s=JSON.parse(o.value);n.value=JSON.stringify(s,null,2),u.value="格式化",l.value=null,a.value={title:"格式化成功",message:`输出 ${n.value.split(`
`).length} 行`}}catch(s){l.value={title:"JSON 解析错误",message:`${s.message}
${j(s,o.value)}`}}finally{y.value=!1}}function j(s,t){const d=s.message.match(/position (\d+)/);if(d){const p=parseInt(d[1]),c=t.substring(0,p).split(`
`),r=c.length,x=c[c.length-1].length+1;return`错误位置：第 ${r} 行，第 ${x} 列`}return""}function M(){if(!o.value.trim()){l.value={title:"输入为空",message:"请先输入 JSON 数据"};return}try{const s=JSON.parse(o.value);n.value=JSON.stringify(s),u.value="压缩",l.value=null,a.value={title:"压缩成功",message:`输出 ${n.value.length} 个字符`}}catch(s){l.value={title:"JSON 解析错误",message:s.message}}}function P(){n.value&&navigator.clipboard.writeText(n.value).then(()=>{O.success("已复制到剪贴板")}).catch(()=>{O.error("复制失败，请手动选择复制")})}function R(){o.value="",n.value="",l.value=null,a.value=null,u.value="格式化"}return(s,t)=>{const d=J("el-button"),p=J("el-alert"),c=J("el-input");return _(),N("div",q,[e("div",K,[e("div",W,[m(d,{type:"primary",onClick:I,loading:y.value},{default:h(()=>[...t[4]||(t[4]=[S(" ✓ 格式化 ",-1)])]),_:1},8,["loading"]),m(d,{onClick:M},{default:h(()=>[...t[5]||(t[5]=[S(" ⊟ 压缩 ",-1)])]),_:1}),m(d,{onClick:P,disabled:!n.value},{default:h(()=>[...t[6]||(t[6]=[S(" 📋 复制 ",-1)])]),_:1},8,["disabled"]),m(d,{onClick:R},{default:h(()=>[...t[7]||(t[7]=[S(" 🗑️ 清空 ",-1)])]),_:1})]),e("div",Z,[e("span",H,i(b.value)+" 行 / "+i(V.value),1)])]),l.value?(_(),z(p,{key:0,type:"error",title:l.value.title,description:l.value.message,closable:!0,onClose:t[0]||(t[0]=r=>l.value=null),class:"error-alert"},null,8,["title","description"])):$("",!0),a.value?(_(),z(p,{key:1,type:"success",title:a.value.title,description:a.value.message,closable:!0,onClose:t[1]||(t[1]=r=>a.value=null),class:"success-alert"},null,8,["title","description"])):$("",!0),e("div",Q,[e("div",X,[t[8]||(t[8]=e("div",{class:"section-header"},[e("h3",null,"📥 输入 JSON"),e("span",{class:"section-hint"},"粘贴或输入 JSON 数据")],-1)),m(c,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=r=>o.value=r),type:"textarea",placeholder:"在此粘贴或输入 JSON 数据...",rows:20,class:"json-input"},null,8,["modelValue"])]),e("div",Y,[e("div",ee,[t[9]||(t[9]=e("h3",null,"📤 输出 JSON",-1)),e("span",te,i(u.value),1)]),m(c,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=r=>n.value=r),type:"textarea",placeholder:"格式化结果将显示在此...",rows:20,class:"json-output",readonly:""},null,8,["modelValue"])])]),v.value?(_(),N("div",se,[e("div",ae,[e("div",le,[t[10]||(t[10]=e("span",{class:"stat-label"},"有效 JSON",-1)),e("span",{class:"stat-value",style:L({color:v.value.isValid?"var(--success)":"var(--error)"})},i(v.value.isValid?"✓ 是":"✗ 否"),5)]),e("div",ne,[t[11]||(t[11]=e("span",{class:"stat-label"},"数据类型",-1)),e("span",oe,i(v.value.type),1)]),e("div",ie,[t[12]||(t[12]=e("span",{class:"stat-label"},"键数量",-1)),e("span",re,i(v.value.keyCount),1)]),e("div",de,[t[13]||(t[13]=e("span",{class:"stat-label"},"深度",-1)),e("span",ue,i(v.value.depth),1)]),e("div",ce,[t[14]||(t[14]=e("span",{class:"stat-label"},"数组元素",-1)),e("span",ve,i(v.value.arrayCount),1)]),e("div",pe,[t[15]||(t[15]=e("span",{class:"stat-label"},"压缩率",-1)),e("span",me,i(v.value.compressionRate)+"%",1)])])])):$("",!0)])}}},ge=A(fe,[["__scopeId","data-v-018b5c1e"]]),_e={class:"json-formatter-demo"},ye={class:"demo-container"},he={class:"examples-section"},Se={class:"examples-grid"},Je=["onClick"],Ne={class:"example-description"},Oe={class:"example-preview"},be={__name:"JsonFormatterPage",setup(F){const o=[{title:"简单对象",description:"基础的 JSON 对象示例",data:JSON.stringify({name:"张三",age:28,email:"zhangsan@example.com",address:{city:"北京",street:"中关村大街"}}),preview:'{ "name": "张三", "age": 28, ... }'},{title:"数组数据",description:"包含数组的复杂数据结构",data:JSON.stringify([{id:1,title:"JavaScript",tags:["Web","Frontend"]},{id:2,title:"Python",tags:["Backend","Data"]},{id:3,title:"Go",tags:["Backend","DevOps"]}]),preview:'[ { "id": 1, ... }, { "id": 2, ... }, ... ]'},{title:"嵌套结构",description:"多层级嵌套的复杂数据",data:JSON.stringify({project:{name:"AI 效率工作台",version:"1.0.0",modules:[{name:"聊天模块",features:["消息保存","历史记录","暗黑模式"]},{name:"工具模块",features:["JSON 格式化","正则测试","文本转换"]}]}}),preview:'{ "project": { "name": "...", ... } }'},{title:"API 响应",description:"典型的 API 返回数据格式",data:JSON.stringify({code:200,message:"success",data:{total:100,page:1,items:[{id:1,status:"active",score:95.5},{id:2,status:"inactive",score:87}]},timestamp:"2025-12-23T12:00:00Z"}),preview:'{ "code": 200, "message": "success", ... }'},{title:"错误示例",description:"演示错误检测和定位功能",data:'{ "name": "test", "age": 25, "invalid": undefined }',preview:'{ "name": "test", "age": 25, ... (错误) }'},{title:"大型数据",description:"包含多个对象的数据集",data:JSON.stringify({meta:{total:1e3,version:"1.0"},records:Array.from({length:10},(l,a)=>({id:a+1,name:`Record ${a+1}`,created:new Date().toISOString(),tags:["tag1","tag2","tag3"]}))}),preview:'{ "meta": { ... }, "records": [ ... ] }'}];function n(l){O.info("示例数据已加载，可复制到 JSON 格式化工具中使用"),navigator.clipboard.writeText(l).then(()=>{O.success("示例已复制到剪贴板")})}return(l,a)=>{const y=J("el-button");return _(),N("div",_e,[a[2]||(a[2]=e("div",{class:"demo-header"},[e("h1",null,"JSON 格式化工具"),e("p",{class:"demo-subtitle"},"支持格式化、压缩、错误定位和统计分析")],-1)),e("div",ye,[m(ge)]),e("div",he,[a[1]||(a[1]=e("h2",null,"📚 示例数据",-1)),e("div",Se,[(_(),N(G,null,U(o,(u,b)=>e("div",{key:b,class:"example-card",onClick:V=>n(u.data)},[e("h4",null,i(u.title),1),e("p",Ne,i(u.description),1),e("div",Oe,i(u.preview),1),m(y,{type:"text",size:"small"},{default:h(()=>[...a[0]||(a[0]=[S("加载示例",-1)])]),_:1})],8,Je)),64))])]),a[3]||(a[3]=D('<div class="features-section" data-v-1f21e70a><h2 data-v-1f21e70a>✨ 功能说明</h2><div class="features-grid" data-v-1f21e70a><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>✓ 格式化</h4><p data-v-1f21e70a>将压缩的 JSON 数据展开，支持 2 空格缩进，便于阅读</p></div><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>⊟ 压缩</h4><p data-v-1f21e70a>移除所有空白符和换行，减小数据体积，加快传输</p></div><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>🔍 错误定位</h4><p data-v-1f21e70a>准确指出 JSON 语法错误的行号和列号位置</p></div><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>📊 统计分析</h4><p data-v-1f21e70a>显示数据类型、键数量、深度、数组元素等详细信息</p></div><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>📋 复制功能</h4><p data-v-1f21e70a>一键复制格式化或压缩后的结果到剪贴板</p></div><div class="feature-card" data-v-1f21e70a><h4 data-v-1f21e70a>🎨 主题适配</h4><p data-v-1f21e70a>自动适配亮色和暗色主题，提供舒适的视觉体验</p></div></div></div>',1))])}}},ke=A(be,[["__scopeId","data-v-1f21e70a"]]);export{ke as default};
