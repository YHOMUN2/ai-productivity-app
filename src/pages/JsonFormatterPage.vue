<template>
  <div class="json-formatter-demo">
    <div class="demo-header">
      <h1>JSON æ ¼å¼åŒ–å·¥å…·</h1>
      <p class="demo-subtitle">æ”¯æŒæ ¼å¼åŒ–ã€å‹ç¼©ã€é”™è¯¯å®šä½å’Œç»Ÿè®¡åˆ†æ</p>
    </div>

    <div class="demo-container">
      <JsonFormatter />
    </div>

    <!-- ç¤ºä¾‹æ•°æ®åŒº -->
    <div class="examples-section">
      <h2>ğŸ“š ç¤ºä¾‹æ•°æ®</h2>
      <div class="examples-grid">
        <div 
          v-for="(example, index) in examples"
          :key="index"
          class="example-card"
          @click="loadExample(example.data)"
        >
          <h4>{{ example.title }}</h4>
          <p class="example-description">{{ example.description }}</p>
          <div class="example-preview">{{ example.preview }}</div>
          <el-button type="text" size="small">åŠ è½½ç¤ºä¾‹</el-button>
        </div>
      </div>
    </div>

    <!-- åŠŸèƒ½è¯´æ˜åŒº -->
    <div class="features-section">
      <h2>âœ¨ åŠŸèƒ½è¯´æ˜</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h4>âœ“ æ ¼å¼åŒ–</h4>
          <p>å°†å‹ç¼©çš„ JSON æ•°æ®å±•å¼€ï¼Œæ”¯æŒ 2 ç©ºæ ¼ç¼©è¿›ï¼Œä¾¿äºé˜…è¯»</p>
        </div>
        <div class="feature-card">
          <h4>âŠŸ å‹ç¼©</h4>
          <p>ç§»é™¤æ‰€æœ‰ç©ºç™½ç¬¦å’Œæ¢è¡Œï¼Œå‡å°æ•°æ®ä½“ç§¯ï¼ŒåŠ å¿«ä¼ è¾“</p>
        </div>
        <div class="feature-card">
          <h4>ğŸ” é”™è¯¯å®šä½</h4>
          <p>å‡†ç¡®æŒ‡å‡º JSON è¯­æ³•é”™è¯¯çš„è¡Œå·å’Œåˆ—å·ä½ç½®</p>
        </div>
        <div class="feature-card">
          <h4>ğŸ“Š ç»Ÿè®¡åˆ†æ</h4>
          <p>æ˜¾ç¤ºæ•°æ®ç±»å‹ã€é”®æ•°é‡ã€æ·±åº¦ã€æ•°ç»„å…ƒç´ ç­‰è¯¦ç»†ä¿¡æ¯</p>
        </div>
        <div class="feature-card">
          <h4>ğŸ“‹ å¤åˆ¶åŠŸèƒ½</h4>
          <p>ä¸€é”®å¤åˆ¶æ ¼å¼åŒ–æˆ–å‹ç¼©åçš„ç»“æœåˆ°å‰ªè´´æ¿</p>
        </div>
        <div class="feature-card">
          <h4>ğŸ¨ ä¸»é¢˜é€‚é…</h4>
          <p>è‡ªåŠ¨é€‚é…äº®è‰²å’Œæš—è‰²ä¸»é¢˜ï¼Œæä¾›èˆ’é€‚çš„è§†è§‰ä½“éªŒ</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import JsonFormatter from '@/components/JsonFormatter.vue';
import { ElMessage } from 'element-plus';

const examples = [
  {
    title: 'ç®€å•å¯¹è±¡',
    description: 'åŸºç¡€çš„ JSON å¯¹è±¡ç¤ºä¾‹',
    data: JSON.stringify({
      name: 'å¼ ä¸‰',
      age: 28,
      email: 'zhangsan@example.com',
      address: {
        city: 'åŒ—äº¬',
        street: 'ä¸­å…³æ‘å¤§è¡—'
      }
    }),
    preview: '{ "name": "å¼ ä¸‰", "age": 28, ... }'
  },
  {
    title: 'æ•°ç»„æ•°æ®',
    description: 'åŒ…å«æ•°ç»„çš„å¤æ‚æ•°æ®ç»“æ„',
    data: JSON.stringify([
      { id: 1, title: 'JavaScript', tags: ['Web', 'Frontend'] },
      { id: 2, title: 'Python', tags: ['Backend', 'Data'] },
      { id: 3, title: 'Go', tags: ['Backend', 'DevOps'] }
    ]),
    preview: '[ { "id": 1, ... }, { "id": 2, ... }, ... ]'
  },
  {
    title: 'åµŒå¥—ç»“æ„',
    description: 'å¤šå±‚çº§åµŒå¥—çš„å¤æ‚æ•°æ®',
    data: JSON.stringify({
      project: {
        name: 'AI æ•ˆç‡å·¥ä½œå°',
        version: '1.0.0',
        modules: [
          {
            name: 'èŠå¤©æ¨¡å—',
            features: ['æ¶ˆæ¯ä¿å­˜', 'å†å²è®°å½•', 'æš—é»‘æ¨¡å¼']
          },
          {
            name: 'å·¥å…·æ¨¡å—',
            features: ['JSON æ ¼å¼åŒ–', 'æ­£åˆ™æµ‹è¯•', 'æ–‡æœ¬è½¬æ¢']
          }
        ]
      }
    }),
    preview: '{ "project": { "name": "...", ... } }'
  },
  {
    title: 'API å“åº”',
    description: 'å…¸å‹çš„ API è¿”å›æ•°æ®æ ¼å¼',
    data: JSON.stringify({
      code: 200,
      message: 'success',
      data: {
        total: 100,
        page: 1,
        items: [
          { id: 1, status: 'active', score: 95.5 },
          { id: 2, status: 'inactive', score: 87.0 }
        ]
      },
      timestamp: '2025-12-23T12:00:00Z'
    }),
    preview: '{ "code": 200, "message": "success", ... }'
  },
  {
    title: 'é”™è¯¯ç¤ºä¾‹',
    description: 'æ¼”ç¤ºé”™è¯¯æ£€æµ‹å’Œå®šä½åŠŸèƒ½',
    data: '{ "name": "test", "age": 25, "invalid": undefined }',
    preview: '{ "name": "test", "age": 25, ... (é”™è¯¯) }'
  },
  {
    title: 'å¤§å‹æ•°æ®',
    description: 'åŒ…å«å¤šä¸ªå¯¹è±¡çš„æ•°æ®é›†',
    data: JSON.stringify({
      meta: { total: 1000, version: '1.0' },
      records: Array.from({ length: 10 }, (_, i) => ({
        id: i + 1,
        name: `Record ${i + 1}`,
        created: new Date().toISOString(),
        tags: ['tag1', 'tag2', 'tag3']
      }))
    }),
    preview: '{ "meta": { ... }, "records": [ ... ] }'
  }
];

function loadExample(data) {
  // è§¦å‘äº‹ä»¶ï¼Œç”±çˆ¶çº§å¤„ç†ï¼ˆåœ¨æ¼”ç¤ºä¸­ç›´æ¥æ˜¾ç¤ºæ¶ˆæ¯ï¼‰
  ElMessage.info('ç¤ºä¾‹æ•°æ®å·²åŠ è½½ï¼Œå¯å¤åˆ¶åˆ° JSON æ ¼å¼åŒ–å·¥å…·ä¸­ä½¿ç”¨');
  // å¤åˆ¶åˆ°å‰ªè´´æ¿
  navigator.clipboard.writeText(data).then(() => {
    ElMessage.success('ç¤ºä¾‹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
  });
}
</script>

<style scoped>
/* ========== é¡µé¢å®¹å™¨ ========== */
.json-formatter-demo {
  background-color: var(--bg-base);
  min-height: 100vh;
}

/* ========== æ ‡é¢˜åŒº ========== */
.demo-header {
  padding: var(--spacing-xl);
  text-align: center;
  background: linear-gradient(135deg, var(--accent-light, #e0e7ff), var(--bg-secondary));
  border-bottom: 1px solid var(--border-color);
}

.demo-header h1 {
  margin: 0 0 var(--spacing-sm) 0;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--text-primary);
}

.demo-subtitle {
  margin: 0;
  font-size: 1.1rem;
  color: var(--text-secondary);
}

/* ========== æ¼”ç¤ºå®¹å™¨ ========== */
.demo-container {
  padding: var(--spacing-xl);
  max-width: 1400px;
  margin: 0 auto;
}

/* ========== ç¤ºä¾‹æ•°æ®åŒº ========== */
.examples-section {
  padding: var(--spacing-xl);
  max-width: 1400px;
  margin: 0 auto;
  border-top: 1px solid var(--border-color);
}

.examples-section h2,
.features-section h2 {
  margin: 0 0 var(--spacing-lg) 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* ========== ç¤ºä¾‹ç½‘æ ¼ ========== */
.examples-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--spacing-lg);
}

.example-card {
  padding: var(--spacing-lg);
  background-color: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.example-card:hover {
  border-color: var(--accent-light);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.example-card h4 {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
}

.example-description {
  margin: 0;
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.example-preview {
  padding: var(--spacing-sm);
  background-color: var(--bg-secondary);
  border-radius: var(--radius-md);
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.8rem;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ========== åŠŸèƒ½è¯´æ˜åŒº ========== */
.features-section {
  padding: var(--spacing-xl);
  max-width: 1400px;
  margin: 0 auto;
  border-top: 1px solid var(--border-color);
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--spacing-lg);
}

.feature-card {
  padding: var(--spacing-lg);
  background-color: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-card:hover {
  border-color: var(--accent-light);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.feature-card h4 {
  margin: 0 0 var(--spacing-sm) 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: var(--accent);
}

.feature-card p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* ========== å“åº”å¼è®¾è®¡ ========== */
@media (max-width: 768px) {
  .demo-header {
    padding: var(--spacing-lg);
  }

  .demo-header h1 {
    font-size: 1.8rem;
  }

  .demo-subtitle {
    font-size: 0.95rem;
  }

  .demo-container,
  .examples-section,
  .features-section {
    padding: var(--spacing-lg);
  }

  .examples-grid,
  .features-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .demo-header h1 {
    font-size: 1.4rem;
  }

  .demo-container,
  .examples-section,
  .features-section {
    padding: var(--spacing-md);
  }
}
</style>
